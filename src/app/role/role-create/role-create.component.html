<div class="container">
    <div class="row">
        <div class="col-lg-12">
            <form [formGroup]="thisForm" (ngSubmit)="onFormSubmit(thisForm.value)">

                <mat-toolbar>
                    <span>{{ roleModelType | titlecase}}</span>
                    <span>&nbsp;{{'| ' + roleModel?.fullname }} > Create Role</span>
                </mat-toolbar>

                <div class="button-row">
                    <a mat-raised-button color="primary" [routerLink]="['/roles', roleModelType, roleModelId]"><mat-icon>list</mat-icon></a>
                </div>

                <div class="button-row">
                    <button type="submit" [disabled]="!thisForm.valid" mat-raised-button color="primary"><mat-icon>save</mat-icon></button>
                </div>

                <mat-form-field class="example-full-width">
                    <mat-label>User</mat-label>
                    <mat-select formControlName="user" [errorStateMatcher]="matcher">
                        <mat-option *ngFor="let user of users" [value]="user._id">
                            {{ user.firstname  + ' ' + user.lastname}} 
                        </mat-option>
                    </mat-select>
                    <mat-error>
                        <div *ngIf="f.user.errors" class="invalid-feedback">
                            <div *ngIf="f.user.errors.required">Required</div>
                        </div>
                    </mat-error>
                </mat-form-field>

                <mat-form-field class="example-full-width">
                    <mat-label>Role</mat-label>
                    <mat-select formControlName="role" [errorStateMatcher]="matcher">
                        <mat-option *ngFor="let role of allowedRoles" [value]="role.value">
                            {{role.text}} 
                        </mat-option>
                    </mat-select>
                    <mat-error>
                        <div *ngIf="f.role.errors" class="invalid-feedback">
                            <div *ngIf="f.role.errors.required">Required</div>
                        </div>
                    </mat-error>
                </mat-form-field>

            </form>
        </div>
    </div>
</div>